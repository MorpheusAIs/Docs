# Building the Foundation: Phased AMM Deployment in Morpheus
## Introduction

In accordance with the framework outlined in the Techno Capital Machine (TCM) document, the initial 90-day Liquidity Bootstrapping Phase is critical for establishing foundational liquidity. Throughout this phase, Capital Providers are tasked with allocating their stETH yield towards Morpheus, contributing to the ecosystem's growth and stability. In return, Capital Providers are rewarded with 24% of the daily MOR emissions. 4% of the daily MOR emissions are also earmarked for the Protection Fund as Protocol Owned Liquidity (PoL), which plays a pivotal role in initializing the Uniswap Automated Market Maker (AMM) pool.

The TCM delineates five key resource categories: Code, Capital, Compute, Community, and the Protection Fund. Post the 90-day Liquidity Bootstrapping Phase, only 52% of the total emissions will be actively circulating. This circulation includes emissions from Code Provider’s (24%), Capital Provider’s (24%), and the Protection Fund (4%) MOR allocations. The allocations designated for Community (24%) and Compute (24%)  will remain non-circulating until a subsequent phase.

## TL;DR

* AMM initiation and fair price discovery are crucial for Morpheus
* Protection Fund reserves its allocated 4% of MOR emissions from the 90-day Liquidity Bootstrapping Phase for initializing the AMM Liquidity Pool
* Only 52% of the emissions released to date will be actively circulating on Day 91
* The AMM Initiation Phase strategy pairs 52% of Morpheus's earned yield with the MOR from the Protection Fund
* The remaining 48% of yield earned by Morpheus is allocated to a Uniswap V3 concentrated liquidity range from 0 to the initiation ratio (aka price), adjusted once per week based on market price
* Yield generated by Morpheus from Capital Providers during the 30-day AMM Initiation Phase is periodically added to liquidity
* After the 30-day AMM Initiation Phase, there will be a transition period (known as the AMM Balancing Phase) during which the concentrated Liquidity Support Range (LSR) will be adjusted into the full range liquidity position
* Four launch phases:
1. Liquidity Bootstrapping Phase (Day 0 - 90)
2. AMM Initiation Phase (Day 90 - 120)
3. AMM Balancing Phase (Day 120 - 220)
4. Long Term Steady State (Day 220+)

## Liquidity Bootstrapping Phase (Day 0 - 90)

Morpheus’ Fair Launch kicked off on February 8, 2024 at 12:00 UTC with the beginning of the liquidity Bootstrapping phase. The goal of this phase is to generate yield for Morpheus via the Techno Capital Machine (TCM) model. These concepts are described in more detail via their own documents in GitHub, but to provide context, below is a brief description of the liquidity bootstrapping phase:
* Capital Providers deposit stETH with Morpheus
* Morpheus earns yield from the stETH (principal remains with the Capital Providers)
* In exchange, Capital Providers earn 24% of the MOR emissions (each depositor earning their pro rata share). These MOR emissions are not claimable until Day 90.

The stETH yield earned by Morpheus is an integral part that allows the AMM Initiation Phase to kick off. 

## AMM Initiation Phase (Day 90 - 120)

To optimize the deployment of resources during this nascent stage, it is proposed that 52% of yield earned by Morpheus from the Capital Providers, accrued by day 88 (Note: Day 88 is used so that the pool can be created prior to MOR being claimable and transferable. This gives the developers sufficient time to prepare the pool prior to launch on Day 91), and be paired with all MOR acquired by the Protection Fund within the same timeframe. This strategy aligns with the long-term liquidity provisioning goals set forth in both the Whitepaper and TCM, albeit modified to account for the actual circulating supply at day 90.

The strategy for managing the remaining 48% of the stETH (converted to wETH) earned involves its allocation to a Uniswap V3 concentrated liquidity range that is strategically positioned from 0 to the initiation ratio, thereby bolstering wETH liquidity within the pool and facilitating efficient market activity. This Liquidity Support Range (LSR) acts as extra liquidity support - any decrease in the MOR to wETH price will move the price into the LSR and help to reduce price impact. The LSR will be reassessed and adjusted once per week based on the prevailing market price. If the market price exceeds the upper limit of the LSR, the upper bound will be recalibrated to sit at the new price level, at the time of rebalance. Should the market price fall within the LSR, no adjustments will be made until the next weekly review. This mechanism is designed to last for 30 days, after which, the LSR will transition to encompass the full range (AMM Balancing Phase), enhancing overall market stability and liquidity.

This approach ensures a measured and strategic deployment of resources, fostering a robust and liquid market environment that aligns with the long-term objectives of the TCM and the broader Morpheus ecosystem.

### Utilizing Yield Generated During AMM Initiation Phase

To support fair price discovery without external interventions, Morpheus will periodically add the yield generated during the 30-day AMM Initiation Phase to the liquidity pool.
Post the AMM Initiation Phase, in adherence to Morpheus's Whitepaper, the Capital Provider Smart Contract is slated to allocate 50% of stETH yield received to the Morpheus swap function. This function initiates a swap, purchasing MOR tokens from the AMM, combining them with the remaining 50% of stETH (swapped to wETH), which is then locked into the AMM as Protocol Owned Liquidity.

## AMM Balancing Phase (Day 120 - 220)

The goal for the Liquidity Support Range is to expand to a full-range position at the completion of the AMM Initiation Phase (Day 120), the Liquidity Support could be in two situations:
1. The price is above the Liquidity Support Range, meaning that the Liquidity Support Range consists of 100% wETH and 0% MOR
2. The price falls somewhere within the Liquidity Support Range, meaning the balance consists of greater than 0% MOR

To transition from a concentrated position requires a 50-50 balance of wETH and MOR. Therefore, Morpheus will need some mechanism to achieve this ratio.
#### Scenario 1: Should the Liquidity Support Range comprise over 50% wETH at the end of the AMM Initiation Phase, the following strategy will be implemented:
The surplus wETH will be incrementally distributed across the subsequent 100 days, integrating into the daily yield stream earned by Morpheus from Capital Providers, half of which subsequently gets converted into MOR and added to full-range liquidity. This approach ensures a steady and strategic deployment of excess wETH, augmenting the regular yield stream without overwhelming the market or adversely impacting the liquidity position.

#### Scenario 2: In the event that the Liquidity Support Range is predominantly MOR (exceeding 50%), the strategy will adapt as follows:
The additional MOR holdings will be retained by Morpheus for future pairing with incoming daily yield earned, effectively eliminating the need to convert half of the stETH yield into MOR in the open market. This continues daily until excess MOR is depleted.

Regardless of which scenario occurs, once equilibrium is achieved, the AMM Balancing Phase comes to an end. 

## Long Term Steady State (Day 220+)

At this point, the protocol reverts to the procedures as outlined in the Whitepaper. The Capital Provider Smart Contract will provide 50% of the stETH yield produced to the Morpheus swap function. The swap buys the MOR tokens from an Automated Market Maker (AMM) then pairs them with the rest 50% of the stETH (swapped to wETH) earned and added to the liquidity pool as PoL.

## Appendices
### Appendix 1: Mock-up Day.88 Visualization of AMM Initiation
#### Please note, all numbers provided are hypothetical and for presentation purposes only. Numbers are not meant to be a prediction, nor give any indication of expected prices. For all discussion and predictions around price, please refer to the appropriate Discord channels and resources provided by the community. 

* Protection Fund MOR: 50,309.95
* For demonstration purposes; 88 Days of Yield Earned by Morpheus: 500 ETH
* 52% of Yield for Initiation: 260 ETH
* 48% of Yield for Liquidity Support Range: 240 ETH

<img src="/Graphics/Docs Graphics/English/Phased%20AMM%20Deployment/1.png">


### Appendix 2: Range Example:

* Starting Ratio: 0.00516796 ETH / MOR
* Liquidity Support Funds: 240 ETH
* Liquidity Support Range: 0.0000000 to 0.00516796

If the prevailing market price falls into the Liquidity Support Range at 12:00 pm UTC one week after launch (or previous re-balance period), then the Liquidity Support Range will not be adjusted. 

Starting Ratio: 0.00516796 ETH / MOR

<img src="/Graphics/Docs Graphics/English/Phased%20AMM%20Deployment/range1-.png">

However, if the prevailing market price has increased, then the Liquidity Support Range is adjusted. For example, if the prevailing market price has increased to 0.01033592 ETH / MOR, then the new Support Range would be as follows:

Prevailing Market Price: 0.01033592 ETH / MOR

<img src="/Graphics/Docs Graphics/English/Phased%20AMM%20Deployment/range2.png">

### Appendix 3: AMM Balancing Phase Examples

<img src="/Graphics/Docs Graphics/English/Phased%20AMM%20Deployment/2-.png">

** All prices are denoted in MOR per wETH

** Steps are listed as occurring daily for simplifying the numerical presentation. Actual transactions will happen on a weekly cadence.

### Appendix 4: Timeline of Phases & Key Events

<img src="/Graphics/Docs Graphics/English/Phased%20AMM%20Deployment/3.png">

### Appendix 5: User Actions Available During Various Phases

<img src="/Graphics/Docs Graphics/English/Phased%20AMM%20Deployment/4.png">

### Appendix 6: Glossary

* AMM (Automated Market Maker): A decentralized exchange protocol that relies on a mathematical formula to price assets. Instead of using an order book like a traditional exchange, assets are priced according to a pricing algorithm.
* Bootstrapping Period: A designated period at the beginning of a protocol's launch intended to establish foundational liquidity and encourage early participation by rewarding contributors.
* Capital Providers: Participants in the ecosystem who supply capital (in this case, stETH yield) to the protocol. 
* Code Providers: Individuals or entities that contribute to the development and maintenance of the protocol's underlying code and technology.
* Compute: Refers to the computational resources required for the protocol's operations.
* Community: The collective of builders creating interfaces, contributing to the Morpheus software and agents.
* Concentrated Liquidity Range (LSR): A specific concentrated price range within a Uniswap V3 liquidity pool.
* ETH (Ethereum): The native cryptocurrency of the Ethereum blockchain, used to pay for transaction fees and computational services.
* Full Range Liquidity: A strategy in Automated Market Makers (AMMs) where capital is allocated across the entire price range of a trading pair, ensuring liquidity is available at all price levels. 
* Initiation Ratio: The ratio of MOR to ETH that will be used to determine the initial price and launch the AMM pool.
* MOR: The native token of the Morpheus ecosystem.
* PoL (Protocol Owned Liquidity): Liquidity that is owned and controlled by the protocol itself, rather than by individual liquidity providers. This helps ensure the protocol's long-term sustainability and independence.
* Protection Fund: A reserve of assets earmarked for safeguarding the protocol's stability and for initializing the AMM liquidity pool.
* stETH Yield: The returns generated from staking ETH in the Lido protocol on the Ethereum blockchain.
* TCM (Techno Capital Machine): The foundational document or framework that outlines the strategic vision and operational mechanics of the Morpheus ecosystem.
* Uniswap V3: The third iteration of the Uniswap protocol, which introduced concentrated liquidity and multiple fee tiers.
* wETH (wrapped Ethereum): A token that represents a ‘wrapped’ version of the underlying asset. This wrapped version is created to allow additional functionality such as existing on non-native chains.
