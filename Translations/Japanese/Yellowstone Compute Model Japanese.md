![Yellowstone Image 1](https://github.com/MorpheusAIs/Morpheus/assets/1563345/80a6c1cf-fe52-42ba-bfd4-91d9faf67f07)

# Morpheus "イエローストーン" 計算モデル
### Erik Voorhees
### 2024年1月3日

分散型AIネットワークでの計算を奨励するために、モーフィウストークンの経済構造の提案変更。
Notionを確認してください：https://defiant-wolfsbane-830.notion.site/Morpheus-Yellowstone-Compute-Model-2ca9b4e7e1374c898937fdbd1b964cc1


## 要約
イエローストーン計算モデルでは、モーフィウスネットワークは実際の計算のみに対して入札競争プロセスによってプロバイダに支払われ、残高に応じてIPS（推論/秒）の稀少な産出をMORトークン所有者に比例配分します。これにより、ユーザーエクスペリエンスが大幅に向上し、同時にシビル攻撃のリスクが最小限に抑えられます。イエローストーンでは、プロバイダの応答速度と正確性を確保するために、時間とパス/フェールデッドテストが導入されています。イエローストーンはヒントや結果をルーターを通じて送信し、ブロックチェーントランザクションを最小限に抑え、大規模なオペレーションを許可します。このモデルにより、MORは基本的な価値を実現しており、許可されていない計算リソースへの永続的（無限ではないですが）なアクセスをトランザクションなしで取得できるようになります。

この論文は、[モーフィウスホワイトペーパー](https://github.com/MorpheusAIs/Morpheus/blob/main/!KEYDOCS%20README%20FIRST!/2.WhitePaper.md)の「計算プルーフ、登録、報酬」セクションを置き換えます。

## 背景
Morpheusは、代替のない生成型AIを提供するために、十分で拡張可能な計算リソースを刺激するトークンエコノミクスを使用します。最初の構想では、Morpheusは計算プロバイダに対してMOR供給量の24%を比例配分しました。これは、受け取った推論リクエストに依存し、これらのプロバイダを優先させるために所有するMORの量に基づきます。

### オリジナルのホワイトペーパーより：
> "各計算プロバイダーは、手数料として燃えるMORの比率によって計算プロバイダーステータスの証明を行い、一定比率のMORトークンを毎日獲得します。

> 例えば、ネットワークが100の計算プロバイダで立ち上がった場合、それぞれのプロバイダは燃やしたMORの量に基づき、比例した報酬を獲得します。この場合、各プロバイダが100MORを燃やしたと仮定すると、毎日の3,456MORトークンの1％、すなわち34.56MORが獲得されます。"

### このアプローチには3つの主要な問題があります：
1) ユーザーは推論ごとにトランザクション手数料を支払う必要があります。手数料が低くても、この摩擦は相当大きいものであり、ユーザーエクスペリエンスを悪化させ、常にOpenAIのユーザーエクスペリエンスに劣ってしまいます。少なくとも推論ごとにブロックチェーントランザクションが必要であり、これはL2でもスケーラブルではない場合があります。推論イベントごとのコストが非常に低い場合、ブロックチェーントランザクションが必要であれば、経済学的には実現不可能です。
2) このモデルは非常に悪用されやすく、計算プロバイダの予想収入が実際の計算コストをはるかに上回るためです。したがって、対戦相手は自身の計算プロバイダノードにスパム推論リクエストを送信し、実際には誰にも経済的価値を提供していないにもかかわらず、毎日の大部分のMORトークンを獲得することができます。この結果、大量の初期（使用されていない）計算が発生し、巨大な収入機会がなくなるとすぐにこれらの計算も消えてしまい、MORで支払われたこの初期補助金は無駄になります。
3) MORの所有量に基づいて推論リクエストを処理の優先順位を付ける場合、ネットワークはパフォーマンス（応答時間）や推論処理のコストを無視しますが、これらの2つの要素を最適化するべきです（応答時間と計算コストはできるだけ低くする必要があります）。MORを最も保持しているプロバイダが大学時代の200ドルのGPUを使用している場合、多くのユーザーの推論パフォーマンスは非常に悪くなります。優先順位は入札価格とパフォーマンスに基づくべきであり、MORの保有量ではないはずです。

以下に示す「イエローストーン」モデルは、上記の問題を解決するためにMorpheusの計算プロバイダトークン経済を変更します。割り当てられた排出量は何であっても、このモデルは有効であり、総排出量の24%が変わらないと仮定します。

## 翻译 private_upload\default_user\2024-04-15-16-15-08\Yellowstone Compute Model Chinese.md.part-1.md

### 目標：
1) ユーザーが推論ごとに支払いをしなくても良い（理想的にはまったく支払わなくて良い）。
2) 高効率でスケーラブルかつ許可不要の計算リソースを提供し、過高な価格を支払わないようにする。
3) 計算提供者間の低レスポンスタイムとコスト競争を刺激する。
4) ブロックチェーントランザクション数を最小限にする（L2またはその他）。
5) MORに経済的に合理な基本的な需要があることを示す。

## Yellowstoneモデル
4つのコンポーネントが関与しています：

### ユーザー
* クエリの要件を持っている
* 迅速かつ正確な計算が必要であり、無料かつ検閲/監視がないことを望む

### プロバイダー
* 計算リソースを所有している
* 金銭（MOR）を望む

### ルーター
* 高スループット処理エンジン
* 分散型

### 計算契約
* 許可不要のスマートコントラクトであり、MORの放出を受け取り、プロバイダーのデビットとクレジットを追跡し、呼び出し時にプロバイダーに支払われる。

## 標準的な重み付けと指標

AIには推論回数（IPS）で測定される原子単位が存在します。これは概念的にブロックチェーン上のweiと比較することができます。推論はYellowstoneルーター内のレートを定義するために使用されます。したがって、単一のMorpheus AIユニットの重みは1回の推論です。これは要求のタイプに応じて任意の計算タスクに適用することができます。

AIとブロックチェーンの共通点が融合することで、MorpheusはAIとブロックチェーンの両者が使用する用語を明確にするためのオープンソースの測定基準を提供することを目指しています。

モデルが返すレスポンスのサイズに基づいて定義される2種類のタイプのヒントがあります：

**確定的な長さのヒント**は、返されたレスポンスのサイズを考慮しています。以下はその例です：
- チャット/画像作成
- 疾患診断
- オブジェクト識別
- 不正検知

**不確定な長さのヒント**は、レスポンスがあとからわかるリソースです。不確定性のあるレスポンスの例示的なヒントには以下があります：
- パスタに関する奏鳴曲を歌ってください。
- 誕生日のビデオを作成する。
- モデルXとモデルYを組み合わせる。
- 3Dモデルを.stlファイルにスライスする。

Yellowstoneは確定的な長さのヒントに重点を置いています。したがって、ルーターは将来的に不確定なヒントを処理するように構築されますが、現時点ではそのサービスは提供されません。そのため、分散型AIの標準化された測定を使用しています。

## DeAI速度

### 秒ごとの推論の表現：

| タイプ              | レスポンス           | レート                    |
| ----------------- | -------------- | ----------------------- |
| 確定              | 言語           | 秒ごとの推論トークン数 (TPS)  |
| 不確定 - メディア     | 音声           | 秒ごとの推論サンプル数 (ISPS) |
| 不確定 - メディア     | ビデオ           | 秒ごとの推論フレーム数 (IFPS)   |
| 不確定 - 未来技術 | 未知の未来形式 | NA                      |

## 翻译 private_upload\default_user\2024-04-15-16-15-08\Yellowstone Compute Model Chinese.md.part-2.md

Yellowstoneルータの最初の推論測定はTPSとなります。他の推論フォーマットは後でリリースされます。

### 時間

推論ブロックの時間は12秒であり、つまり1分あたり5回、推論トランザクションの1つのブロックが発行されて記録されます。

## 定義

**"ユーザー"**：MORアドレスを所有し、ルータにリクエストを送信する任意のエンティティであり、計算リソースを使用します。これはMorpheusデスクトップノードからリクエストを送信する特定の個人であるか、ロボット、または最終ユーザーとMorpheusネットワークとのインタラクションを代行する企業やサードパーティのウェブサイト（最終ユーザーの推論は、計算契約によってトラッキングまたは考慮されない場合を除き）。

**"プロバイダー"**：MORアドレスを持ち、ルータを介してIPSの入札を提出する計算リソースを提供する任意のエンティティです。プロバイダーはルータから入札を勝ち取ると、ユーザーが使用するためにさまざまなAIモデルに計算リソース（GPUなど）を提供します。

**"ルータ"**：MORアドレスを所有するソフトウェアアプリケーションであり、ユーザーとプロバイダー間の二国間市場を調整します。ルータはプロバイダーのアドレスと入札を登録および追跡し、ユーザーのリクエストを処理し、処理されたリクエストの記録を[ミリ秒]で行い、テストの合格/不合格を処理し、合格したプロバイダーに対してMORを支払うための計算契約の支払い手段として機能します。ルータはMORトランザクション（またはブロックチェーン上の任意のトランザクション）を送受信しません。ルータはリクエストの内容や応答を表示しません。

**"計算契約"**：MORアドレスを所有するスマートコントラクトであり、割り当てられた計算バケツに送信されたすべてのMORを受け取り、合格していないプロバイダーの残高を追跡し、プロバイダーが支払いを要求したときに合格したプロバイダーにMORを支払います。

**"1秒あたりの推論回数"(IPS)**：AIでの推論の原子単位です。推論はYellowstoneルータ内の速度を定義するために使用されます。したがって、単一のモーフィウスAIユニットの重みは1回の推論です。

**"IPSMax"**：ルータが受け入れるIPSの最大数量を指します。

**"RFC"**：「計算リクエスト」を表します。ユーザーはRFCをルータに送信し、[LLM]と[IPSMax]を指定します。ユーザーはこの上限値を設定したいと思うかもしれません、なぜなら高い数字=より長い応答待ち時間であり、[UserMax]に多く計上されるため、毎日は限られているからです。

### コントラクトの保護

MOR数量を操作するために使用されない計算リソースによる攻撃を防ぐために、計算プロバイダに割り当てられた未使用のMORプールは、ブロックあたり最大1%までしか減少しません。これは通常の計算排出+1%に相当します。

### 計算手引きインセンティブ

キャピタル契約のガイド期間の後、最初の100人の計算プロバイダは割合に応じてMOR排出量の2.4%を取得する権利があります。これは、ルータが計算し、計算契約に記録するものです。

## ワークフロー
1) ユーザー、プロバイダー、およびルータがそれぞれMOR公開鍵を作成します（これは彼らのアイデンティティであり、すべてのメッセージがこのように署名されます）。
2) ユーザーがMOR残高を持っている場合、ユーザーは署名された「計算リクエスト」（RFC）メッセージをルータに提出することができます。ユーザーは[LLM]と[IPSMax]を指定します。
3) ルータはRFCをMOR残高に基づいて優先的に処理します（Sybil攻撃を解決するため）。
4) ルータは[LLM]をサポートするプロバイダを選択し、各IPSの最低入札を優先します。
5) ルータはプロバイダにアクティブチェックを送信します。合格した場合は、
6) ルータはユーザーをプロバイダに接続します。
7) ユーザーはクエリ（[LLM]、[ヒント]）をプロバイダに送信します。
8) プロバイダはクエリを計算し、結果をユーザーに送信します。
9) ユーザーは4番目と5番目のステップの間の時間[ミリ秒]、提供された[ISP]、および[合格/不合格]をルータに報告します。
10) もし[ミリ秒]あたりの[IPS]が過去のZ回の同じ[LLM]のクエリの平均値のX％以上であり、かつユーザーが[合格]を報告した場合、ルータは計算契約に対してMORを記録するようにプロバイダに指示します。
11) （後である時点で）プロバイダは計算契約からMOR支払いを要求します。これが有効である場合（これまでの最初のブロックチェーントランザクションであり、バッチ処理可能です）、計算契約はMOR支払いを送信します。

![計算契約 図2](https://github.com/MorpheusAIs/Morpheus/assets/1563345/e66ea20c-9851-4f9e-9caa-66c6d798c462)

## 翻译 private_upload\default_user\2024-04-15-16-15-08\Yellowstone Compute Model Chinese.md.part-3.md

## 結果
* ユーザーはクエリの結果を迅速に受け取り、何の費用も支払う必要がありません（これにより、驚くべきユーザーエクスペリエンスが提供され、採用が促進されます）。 **ゴール1を解決します。**
* 競争入札プロセスを通じて、計算契約は支払いを計算し、オーダーしたユーザーによる品質/満足度の検査を行います。 **ゴール2を解決します。**
* 応答が十分に速ければ、プロバイダは計算契約から金銭（MOR）を得ることができます。プロバイダは、提供する計算に要求される正確な金額を得ます。彼が要求する金額が高すぎる場合、他の人がより低い価格で出すため、システムは効率的であり、プロバイダの価格を基本的な電力のコストに近づけるように推進します。 **ゴール3を解決します。**
* チェーン上のトランザクションの数を最小限に抑えます（何千ものクエリが行われる間、チェーン上のトランザクションは必要ありません）。 **ゴール4を解決します。**
* 迅速かつ無料の計算能力の入手は、ユーザーがMORトークンを保持する需要を駆動します。 **ゴール5を解決します。**
* ステップ6とステップ7は、合理的なプライバシーを提供します（クエリはルータに関わらず、結果も同様です）。プロバイダは何らかのランダムな選択で選ばれるため、ユーザーのID以外はわかりません。TOR + FHEを使用することで、さらなるプライバシー保護が実現できます。
* MOR残高を計算契約から削減しました。支払ったMOR < エミッションから受け取るMORの周期ごとの量であれば、契約は賠償されます。
* ユーザーがユーザーのUserMaxを超えるRFCを送信した場合、ルーターはそのリクエストを拒否します。

---

## 計算予算
Morpheusネットワークは、特定の期間（例：毎日）にいくらのMORを計算に費やすか決定する必要があります。各サイクルにおいて、計算契約は最大でこのMORを使用することができます。この数値にMORの価格を乗じることで、私たちは毎日の計算のためのドル予算を得ることができます。

## アクセスレート
Morpheusネットワークは、IPSの生産性資源を「アクセスレート」という概念によって割り当てます。アクセスレートは、1つのMORトークンが1日にアクセスできるIPSの量を制御します。未使用のアクセスは蓄積されません。アクセスレートは常に1つのMORトークンに対するIPSの数量（例：1 MOR = 15,000 IPS）として表されます。アクセスレートはMaxIPSによって一部決定され、ネットワークが1日に購入できる最大IPSの数量を定量化します。

**アクセスレート** = (1 / MOR供給) * MaxIPS
**MaxIPS** = ((MOR計算予算 * MOR価格) / IPS価格) * 1000
**UserMax** = アクセスレート * ユーザーのMOR残高

### サンプルの仮定：
**MOR供給** = 10,000,000 MORトークン
**MOR計算予算** = 1日に3,000 MORトークン
**MOR価格** = $20
**IPS価格** = 1000 IPSあたり$0.002
**ユーザーの残高** = 5 MORトークン

### サンプルの結果：
**MaxIPS** = 30,000,000,000 IPS（ネットワークが1日に購入/生産できる最大IPSの数量）
**アクセスレート** = 3,000（したがって、1つのMORトークンは1日に3,000 IPSのアクセス権を取得します）
**UserMax** = 15,000（5つのMORトークンを持つユーザーは1日に最大で15,000 IPSにアクセスできます）

- 各サイクル（毎日）において、Morpheusはネットワークとして、計算プロバイダからXのIPSを購入するために十分な資金を持っています。Xは計算契約が支払いたい金額（「計算予算」）を現在のMOR価格で割ったもので、IPS市場レートの関数です。
- もし計算予算が1日に$3,000の価値の3,000 MORである場合、ネットワークはその日に最大で$60,000のIPSを購入（生産）することができます。もし1,000 IPSの市場価格が$0.002である場合、ネットワークは最大で30億IPS（30m x 1000 IPS）を購入することができます。
- この30億IPSの潜在生産量は、MOR残高の割合で分配されます。例えば、10,000,000 MORが存在すると仮定します。500 MORトークン（総量の0.005%）を保有しているユーザーは、その日に最大で150万IPSに無料でアクセスできます。
- 計算予算が排出水準以下である限り、計算契約はMORを使い果たしません。
- 実際には、ほとんどのMORトークンはウォレットや取引所に保管され、需要に応じたIPSの生産にはほんのわずかしか使用されません。

## コメント
* MORの根本的な需要は、Morpheusネットワークで生成性AIやその他の形式の計算にアクセスしたいユーザーから来ています。

* プロバイダのハードウェアのタイプは、ネットワークにとって重要ではありません。ただし、彼らがユーザーのパス/失敗テストを満たすことが重要です。クエリに対してより高い入札を行うプロバイダは、彼らが効果的に処理できないクエリがあるため、このテストに合格しないため罰せられます。

## 翻译 private_upload\default_user\2024-04-15-16-15-08\Yellowstone Compute Model Chinese.md.part-4.md

* 上述のモデルは、提供者に計算が必要な場合にのみ支払われる重要なものです。これにより、ネットワークが必要としない場合に多くのMORを提供することが早すぎることを回避します。

* 提供者は、与えられたLLMを所有していることを証明する必要があります。これは、彼らの鍵を使用してLLMモデルのハッシュに署名することで行われます。これは彼らがそれを使用したことを証明するわけではありませんが、それをダウンロードしてインストールしたことを証明し、ある程度の労働を示すことによって、sybilに対するある種の詐欺を防ぎます。もし提供者がユーザーにスパム結果を提供した場合、ユーザーは[失敗]と[ミリ秒]を一緒にルーターに送信することができます。その場合、提供者はその計算に対する報酬を受け取ることはありません。Morpheusは完璧な答えが必要とするわけではありません...競争相手に比べて十分な数の良い答えが必要なだけです。

* RFCによるネットワークのSybil攻撃を無効化するために、アクセス率が使用されます。RFCを送信する「コスト」は、MORトークンを取得するためのコストをRFCの数で除算したものです。したがって、コストはゼロにはならず、ユーザーはRFCを作成するたびに損害を受けることはありません。

* 成功/失敗はユーザーによって決定され、ある程度の品質を監視します。ユーザーは[失敗]と[ミリ秒]の結果をルーターに伝えます。失敗した場合、報酬がないか罰則が課されます（未定）。虚偽の失敗提供者にはインセンティブがありません（金銭的なインセンティブはありません）。このメカニズムにより、提供者は高速で無用な結果を送信することを防ぎます。
考慮事項：もしユーザーのMOR > 提供者のMORである場合、失敗した場合にのみ報酬を受け取ることができます。そうでない場合は、単に負のポイントが与えられ、ルーターは優先順位のロジックで使用できます。

* ユーザー、提供者、ルーター、および計算契約の4者は、それぞれ固有のMORアドレスを持っています。すべてのパーティ間のメッセージには署名が必要です（ただし、大部分はブロックチェーン取引は不要です）。

* 提供者は、Sybil攻撃を防ぐために非ゼロのバランスを持っている必要があります。

* [ミリ秒]の基準が高ければ高いほど、ネットワークは全体的に速くなりますが、小規模な提供者には制限があります。

* 遅い結果を提供することにはデメリットがあります（計算後の収入がないため）。

